<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="ansible入门, 博客，个人经验分离，kubernetes,k8s,Linux运维，Python">
    <meta name="description" content="1、启停服务器重启：shutdown -Fr关闭：shutdown -F
2、新增用户mkgroup -&#39;A&#39; id=&#39;3001&#39; osquery
mkuser id=&#39;3001&#39; admin=&#39;false&#39; pgrp=&#39;osquery&#39; ">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>ansible入门 | 躺平的人生</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">躺平的人生</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">躺平的人生</div>
        <div class="logo-desc">
            
            本站记录本人各种学习的旅途，笔记，用于巩固自我并启发后来人
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://miaohsukang.gitee.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #F062A7;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://miaohsukang.gitee.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://ts1.cn.mm.bing.net/th/id/R-C.3e4ab31f04d3e834df03f3de607f84b2?rik=DIpDlci2fXV5LQ&riu=http%3a%2f%2fanthillonline.com%2fwp-content%2fuploads%2f2015%2f05%2fIBM-building.jpg&ehk=OCad0rfBTbVn0jiYafS7rEHPnFpddZCzqYT1120ChpU%3d&risl=&pid=ImgRaw&r=0')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">ansible入门</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/aix%E5%91%BD%E4%BB%A4/">
                                <span class="chip bg-color">aix命令</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/" class="post-category">
                                工作笔记
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-02-12
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-02-12
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6.5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    32 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h4 id="1、启停服务器"><a href="#1、启停服务器" class="headerlink" title="1、启停服务器"></a><strong>1、启停服务器</strong></h4><p>重启：<br><code>shutdown -Fr</code><br>关闭：<br><code>shutdown -F</code></p>
<h4 id="2、新增用户"><a href="#2、新增用户" class="headerlink" title="2、新增用户"></a><strong>2、新增用户</strong></h4><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">mkgroup <span class="token operator">-</span><span class="token string">'A'</span> id=<span class="token string">'3001'</span> osquery
mkuser id=<span class="token string">'3001'</span> admin=<span class="token string">'false'</span> pgrp=<span class="token string">'osquery'</span> home=<span class="token string">'/home/osquery'</span> osquery
<span class="token function">echo</span> osquery:Query168 <span class="token punctuation">|</span> chpasswd <span class="token operator">-</span>c <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="3、修改主机名"><a href="#3、修改主机名" class="headerlink" title="3、修改主机名"></a><strong>3、修改主机名</strong></h4><p>修改主机名暂时生效：<br><code>hostname YZH-SC-GRWY-DB1</code><br>永久生效<br><code>smit hostname</code></p>
<h4 id="4、解压缩"><a href="#4、解压缩" class="headerlink" title="4、解压缩"></a><strong>4、解压缩</strong></h4><p>压缩<br><code>tar -cvf new.tar new</code><br><code>tar -cvf new.tar /new</code> 绝对路径压缩，解压后，直接绝对路径解压。<br><code>tar -cvf /app/nc63/nc63_20140217.tar  -X /app/nc63/exclude   /app/nc63</code><br>exclude里的内容是你要排除的目录。比如要排除&#x2F;app&#x2F;nc63&#x2F;index这个目录，在exclude文件里添加&#x2F;app&#x2F;nc63&#x2F;index。</p>
<p>解压</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gunzip <span class="token parameter variable">-df</span> <span class="token number">7.0</span>.0.13-WS-UPDI-AixPPC64.tar.gz
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> <span class="token number">7.0</span>.0.13-WS-UPDI-AixPPC64.tar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="5、查看网络信息"><a href="#5、查看网络信息" class="headerlink" title="5、查看网络信息"></a><strong>5、查看网络信息</strong></h4><p><code>netstat -rn</code> 查看路由情况<br><code>netstat -ni </code>查看网口，对应IP，对应mac地址。<br><code>smit route</code> 添加路由信息，可以在线添加</p>
<h4 id="6、查看机器信息"><a href="#6、查看机器信息" class="headerlink" title="6、查看机器信息"></a><strong>6、查看机器信息</strong></h4><p>查看aix硬件信息：<br><code>prtconf |more </code><br>序列号：<br><code>prtconf |grep &quot;Machine Serial Number&quot;</code><br>查看机器型号：<br><code>prtconf |grep &quot;System Model&quot;</code></p>
<p>上面两个写在一起：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZHCM3DB/<span class="token comment">#prtconf | egrep "Machine|^System"</span>
System Model: IBM,8202-E4D
Machine Serial Number: 849663V<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>CPU个数：<br><code>lsdev -Cc processor</code></p>
<h4 id="7、hdisk相关操作"><a href="#7、hdisk相关操作" class="headerlink" title="7、hdisk相关操作"></a><strong>7、hdisk相关操作</strong></h4><p>设置pv的id号<br><code>chdev -l hdisk6 -a pv=yes</code><br>查看磁盘详细信息</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">lscfg <span class="token operator">-</span>vpl hdisk6 
lsattr <span class="token operator">-</span>El hdisk6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>查看网卡MAC地址<br><code>lscfg -vpl en* </code><br>查看磁盘大小<br><code>bootinfo -s hdisk6</code></p>
<h4 id="8、增加空间"><a href="#8、增加空间" class="headerlink" title="8、增加空间"></a><strong>8、增加空间</strong></h4><p>只针对本地文件系统。<br><code>chfs -a size=+2G /home</code></p>
<h4 id="9、操作系统基本信息"><a href="#9、操作系统基本信息" class="headerlink" title="9、操作系统基本信息"></a><strong>9、操作系统基本信息</strong></h4><p>查看系统启动项<br><code>bootlist -m normal -o</code></p>
<p>添加一个启动项</p>
<p><code>bosboot -ad  /dev/hdisk1</code></p>
<p>查看操作系统位数<br><code>bootinfo -K</code></p>
<p>【vi整体替换字符串】<br>文件中某个字符集体替换，old为你要替换的字符串，new为你要替换成的字符串<br><strong>vi test.sh</strong></p>
<pre class="line-numbers language-none"><code class="language-none">:1,$s&#x2F;old&#x2F;new&#x2F;g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>【pv、vg、lvm、fs操作】<br><code>smit vg </code>可以添加，删除一个vg 添加删除pv盘，<br><code>smit cl_vg</code> 如果HA集群，则加cl_ ，后面的命令也是一样需要增加cl。</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">smit lvm 
smit cl_lvm
smit fs
smit cl_fs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>其它一些常见命令</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">lsvg  <span class="token comment"># 显示所有vg</span>
lspv  <span class="token comment"># 显示所有pv</span>
varyoffvg vgname  <span class="token comment"># 给一个vgvaryoff掉</span>
varyonvg vgname  <span class="token comment"># 给一个vg varyon上</span>
lvlstmajor  <span class="token comment"># 查看没有使用的marjor number</span>
<span class="token function">ls</span> <span class="token operator">-</span>al <span class="token operator">/</span>dev/sharevg  <span class="token comment"># 查看sharevg的majornumber</span>
lslv lvname  <span class="token comment"># 查看一个lv的详细信息。</span>
lsvg sharevg  <span class="token comment"># 查看sharevg详细信息</span>
lsvg <span class="token operator">-</span>p edp3vg  <span class="token comment"># 查看vg的pv空间使用情况。</span>
lsvg <span class="token operator">-</span>l rootvg  <span class="token comment"># 可以查看rootvg的所有lvm信息</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="10、VG信息查看"><a href="#10、VG信息查看" class="headerlink" title="10、VG信息查看"></a><strong>10、VG信息查看</strong></h4><p>HA集群中，rootvg、datavg通常为本地磁盘，涉及到sharexxvg的，通常都是HA双机的共享vg。</p>
<p>vg类型：</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">Add an Original Volume <span class="token function">Group</span>
Add a Big Volume <span class="token function">Group</span>
Add a Scalable Volume <span class="token function">Group</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>不同类型的vg 磁盘属性信息占用的pp数量不一样  <code>Scalable &gt; Big &gt; Original</code><br>正常建立vg，选择Big类型就可以</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">VOLUME <span class="token function">GROUP</span>:       rootvg                   VG IDENTIFIER:  00f91d9e00004c0000000169a6804cd3
VG STATE:           active                   PP SIZE:        512 megabyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
VG PERMISSION:      read/<span class="token function">write</span>               TOTAL PPs:      1114 <span class="token punctuation">(</span>570368 megabytes<span class="token punctuation">)</span>
MAX LVs:            256                      FREE PPs:       597 <span class="token punctuation">(</span>305664 megabytes<span class="token punctuation">)</span>
LVs:                16                       USED PPs:       517 <span class="token punctuation">(</span>264704 megabytes<span class="token punctuation">)</span>
OPEN LVs:           15                       QUORUM:         1 <span class="token punctuation">(</span>Disabled<span class="token punctuation">)</span>
TOTAL PVs:          2                        VG DESCRIPTORS: 3
STALE PVs:          0                        STALE PPs:      0
ACTIVE PVs:         2                        AUTO ON:        no
MAX PPs per VG:     32512                                     
MAX PPs per PV:     1016                     MAX PVs:        32
LTG size <span class="token punctuation">(</span>Dynamic<span class="token punctuation">)</span>: 256 kilobyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>          AUTO SYNC:      no
HOT SPARE:          no                       BB POLICY:      relocatable 
PV RESTRICTION:     none                     INFINITE RETRY: no
DISK BLOCK SIZE:    512                      CRITICAL VG:    no
FS SYNC OPTION:     no                                        rootvg:
LV NAME             <span class="token function">TYPE</span>       LPs     PPs     PVs  LV STATE      <span class="token function">MOUNT</span> POINT
waslv               jfs2       20      20      1    open/syncd    <span class="token operator">/</span>was
issdblv             jfs2       200     200     1    open/syncd    <span class="token operator">/</span>issdb
db2loglv            jfs2       40      40      1    open/syncd    <span class="token operator">/</span>db2log <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="11、修复目录"><a href="#11、修复目录" class="headerlink" title="11、修复目录"></a><strong>11、修复目录</strong></h4><p><code>fuser -kxuc /aaa</code>  目录 杀掉所有使用到&#x2F;aaa的目录 进程。<br><code>umount /aaa</code> 卸载一下<br><code>fsck /aaa</code> 修复该目录。</p>
<h4 id="12、查看某个服务"><a href="#12、查看某个服务" class="headerlink" title="12、查看某个服务"></a><strong>12、查看某个服务</strong></h4><p>l<code>ssrc -s sshd </code>查看sshd服务<br>启停</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">stopsrc <span class="token operator">-</span>s sshd
startsrc <span class="token operator">-</span>s sshd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="13、删除当前用户下所有进程"><a href="#13、删除当前用户下所有进程" class="headerlink" title="13、删除当前用户下所有进程"></a><strong>13、删除当前用户下所有进程</strong></h4><p>例如was<br><code>su - was</code><br>当前用户下  注意：一定是当前用户<br><code>kill -9 -1</code></p>
<h4 id="14、删除网卡及其它"><a href="#14、删除网卡及其它" class="headerlink" title="14、删除网卡及其它"></a><strong>14、删除网卡及其它</strong></h4><p><code>smit  inet</code> 删除一个tcpip，选择需要删除的网卡。<br><code>cfgmgr </code>重新扫描网卡</p>
<p>【其他系统命令】<br>格式化磁盘<br><code>dd if=/dev/zero of=/dev/hdisk3  bs=1M count=2000</code><br><code>ls -lrt</code>  按时间排序<br><code>ls -lS </code>按文件大小排序</p>
<p>mount的时候出现 </p>
<pre class="line-numbers language-none"><code class="language-none">Connot mount guarded filesystem.
The filesystem is potentially mounted on another node<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>可以通过<br><code>mount -o noguard  xxx</code> 对文件系统进行<code>mount</code></p>
<h4 id="15、更换AIX本地镜像硬盘"><a href="#15、更换AIX本地镜像硬盘" class="headerlink" title="15、更换AIX本地镜像硬盘"></a><strong>15、更换AIX本地镜像硬盘</strong></h4><p>以rootvg为例，如需要更换rootvg中的hdisk1硬盘，以下操作均用root用户进行：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span>. 去除rootvg的镜像<span class="token punctuation">(</span>均用root用户<span class="token punctuation">)</span>：unmirrorvg rootvg hdisk1
<span class="token number">2</span>. 把磁盘在rootvg卷组剔除：reducevg rootvg hdisk1
<span class="token number">3</span>. 把磁盘删除：rmdev –Rdl hdisk1
<span class="token number">4</span>. 拔掉故障磁盘，并插入新磁盘
<span class="token number">5</span>. 扫描硬件变动情况，查找磁盘：cfgmgr
<span class="token number">6</span>. 把hdisk0加入到rootvg：extendvg rootvg hdisk1,chvg <span class="token parameter variable">-Qn</span> rootvg
<span class="token number">7</span>. 做rootvg镜像，mirrorvg <span class="token parameter variable">-S</span> rootvg
<span class="token number">8</span>. 添加启动信息boot image到新加磁盘hdisk0，bosboot –ad /dev/hdisk1
<span class="token number">9</span>. 修改启动顺序：bootlist –m normal hdisk0 hdisk1
<span class="token number">10</span>. 检查启动顺序：bootlist <span class="token parameter variable">-m</span> normal <span class="token parameter variable">-o</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="16、xmanager图形化界面打不开"><a href="#16、xmanager图形化界面打不开" class="headerlink" title="16、xmanager图形化界面打不开"></a><strong>16、xmanager图形化界面打不开</strong></h4><p>安装X11<br>lslpp -l|grep X11|wc -l 142 个表示安装全了。如果没有，安装一下。<br>找一个对应操作系统的安装介质，在ppc中smit installp 选择dt这个包，回车安装即可。<br>执行&#x2F;etc&#x2F;rc.dt &amp;完成即可。<br>修改配置信息 </p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token operator">/</span>etc/ssh/ssh_config
ForwardX11 yes 
<span class="token operator">/</span>etc/ssh/sshd_config
X11Forwarding yes <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>重启sshd</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">stopsrc <span class="token operator">-</span>s sshd
startsrc <span class="token operator">-</span>s sshd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>然后用xmanage 或者xstart连接。<br>如果出现 <strong>X11TransSocketINETConnect() can’t get address for localhost</strong> 则<br>在<code> /etc/hosts</code>中把localhost加上 </p>
<pre class="line-numbers language-none"><code class="language-none">127.0.0.1 loopback localhost # loopback (lo0) name&#x2F;address ::1 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="17、消除操作系统亮灯详细步骤"><a href="#17、消除操作系统亮灯详细步骤" class="headerlink" title="17、消除操作系统亮灯详细步骤"></a><strong>17、消除操作系统亮灯详细步骤</strong></h4><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">1<span class="token punctuation">.</span>以root用户身份登录进入系统； 
2<span class="token punctuation">.</span>在命令行输入“diag”命令，进入下一级菜单<span class="token punctuation">;</span> 
3<span class="token punctuation">.</span>选择<span class="token string">"Task Selection(Diagnostics,Advanced Diagnostics,Service Aids,etc.)"</span>进入下一级菜单<span class="token punctuation">;</span> 
4<span class="token punctuation">.</span>回车选择 Identify and Attention Indicators
5<span class="token punctuation">.</span>回车选择 <span class="token string">"Set System Attention Indicator to NORMAL"</span>，前面出现加号 
6<span class="token punctuation">.</span>按F7或者ESC+7 提交，告警灯应该可以消除 
7<span class="token punctuation">.</span>执行完毕退出诊断<span class="token punctuation">,</span>新出现的界面最上面会出现“REPAIR ACTION COMPLETED”的字样，报警灯将熄灭<span class="token punctuation">,</span>恢复正常<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="18、小机硬盘报修收集snap日志"><a href="#18、小机硬盘报修收集snap日志" class="headerlink" title="18、小机硬盘报修收集snap日志"></a><strong>18、小机硬盘报修收集snap日志</strong></h4><ol>
<li><code>snap -r </code><br>A)如果以前未做过snap,系统会报错说明没有可清理的内容,显示<strong>“nothing to clean up”</strong><br>B)如果以前做过snap，显示Do you want me to remove these directories (y&#x2F;n)?回答<strong>“y”</strong></li>
<li><code> snap -gc</code><br>完成后,通过ftp取得**&#x2F;tmp&#x2F;ibmsupt&#x2F;snap.pax.*** 文件 <strong>(snap.pax.Z</strong> 或者<strong>snap.tar.Z</strong>)</li>
</ol>
<h4 id="19、AIX分析IO高"><a href="#19、AIX分析IO高" class="headerlink" title="19、AIX分析IO高"></a><strong>19、AIX分析IO高</strong></h4><p>如果topas中看到系统的IO资源很高，可以利用iostat命令确认哪个文件系统io高。<br><code>iostat -F 2 </code></p>
<h4 id="20、小机切换VG信息不同步问题处理–在线"><a href="#20、小机切换VG信息不同步问题处理–在线" class="headerlink" title="20、小机切换VG信息不同步问题处理–在线"></a><strong>20、小机切换VG信息不同步问题处理–在线</strong></h4><p>在小机HA切换过程中，切换至备机出现备机的vg信息与主机信息不一致，则稳妥的操作步骤：<br>1、将备机的HA给停掉，smit clstop ，选择bring resource offline选项。<br>2、在主机这边将vg信息备份</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token operator">/</span>usr/lib/objrepos
<span class="token operator">/</span>usr/share/lib/objrepos
<span class="token operator">/</span>etc/objrepos<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>3、启动主机的HA<br>4、将vg varyoff掉<br><code>varyoffvg  sharevg</code><br>5、主机这边vg以 -b -u模式varyon<br><code>varyonvg -b -u sharevg</code><br>6、备机操作 importvg信息，其中hdisk3是sharevg中的一块盘<br><code>importvg -L sharevg hdisk3</code><br>7、主机这边正常varyon。<br><code>varyonvg sharevg</code><br>8、信息同步完成，重新切换一下即可。</p>
<h4 id="21、小机切换VG信息不同步问题处理–离线"><a href="#21、小机切换VG信息不同步问题处理–离线" class="headerlink" title="21、小机切换VG信息不同步问题处理–离线"></a><strong>21、小机切换VG信息不同步问题处理–离线</strong></h4><p>1、将两个节点的HA服务全部停止</p>
<p>2、检查两个节点卷组信息</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">CMHOUDU_P720_APP：lspv <span class="token punctuation">|</span>grep shareapp10vg <span class="token punctuation">|</span>wc <span class="token operator">-</span>l
CMHOUDU_P720_DB： lspv <span class="token punctuation">|</span>grep shareapp10vg <span class="token punctuation">|</span>wc <span class="token operator">-</span>l<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>3、确认两个节点上磁盘PVID一致性<br>    <code>lspv |grep shareapp10vg</code></p>
<p>4、在DB节点上：<br>重新导入卷组： <code>SHAREAPP10VG </code></p>
<p><code>IMPORTVG -Y SHAREAPP10VG HDDISKxx</code> ( 指定一块磁盘，根据实际情况）     </p>
<p>5、再次检查卷组信息：</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">CMHOUDU_P720_APP：
lspv <span class="token punctuation">|</span>grep shareapp10vg <span class="token punctuation">|</span>wc <span class="token operator">-</span>l

CMHOUDU_P720_DB：
lspv <span class="token punctuation">|</span>grep shareapp10vg <span class="token punctuation">|</span>wc <span class="token operator">-</span>l

 lspv <span class="token punctuation">|</span>grep shareapp10vg
 lspv <span class="token punctuation">|</span>grep shareapp10vg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>6、在DB节点上去激活卷组：<br><code>VARYOFFVG SHAREAPPP10VG </code></p>
<p>7、在两个节点上启动HA服务。</p>
<h4 id="22、AIX系统集成标准配置"><a href="#22、AIX系统集成标准配置" class="headerlink" title="22、AIX系统集成标准配置"></a><strong>22、AIX系统集成标准配置</strong></h4><p>1、pageingspace设置为16G，一个rootvg的pageingspace 8G，一个datavg的pageingspace 8G<br>lsps -a  查看所有，如果只有rootvg的hd6，请新增加一个<br>smit pgsp 根据需求增加。<br>2、<code>1smitty chgsys,Maximum number of PROCESSES allowed per user改为2000</code><br>3、vi &#x2F;etc&#x2F;security&#x2F;limits修改default:</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">fsize = <span class="token operator">-</span>1
core = <span class="token operator">-</span>1
cpu = <span class="token operator">-</span>1
<span class="token keyword">data</span> = <span class="token operator">-</span>1
rss = <span class="token operator">-</span>1
stack = <span class="token operator">-</span>1
stack_hard = <span class="token operator">-</span>1
nofiles = <span class="token operator">-</span>1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>4、改时区smitty chtz_date,Change Time Zone Using System Defined Values设置为aisa&#x2F;shanghai<br>5、将lg_dumplv改为16G。&#x2F;usr&#x2F;sbin&#x2F;extendlv lg_dumplv 120(120为需要增加的PP数量)<br>6、修改crontab允许的作业数。vi &#x2F;var&#x2F;adm&#x2F;cron&#x2F;queuedefs，在周后一行添加c.200j2n60w<br>7、安装中文包</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">smitty lang

  Add Additional Language Environments

  CULTURAL convention to install	选择IBM-eucCN Chinese <span class="token punctuation">(</span>Simplified EUC<span class="token punctuation">)</span> <span class="token namespace">[zh_CN]</span>、UTF-8 Chinese 	                                           <span class="token punctuation">(</span>Simplified UTF<span class="token punctuation">)</span> <span class="token namespace">[ZH_CN]</span>、GB18030 S-Chinese <span class="token punctuation">(</span>GB18030<span class="token punctuation">)</span> <span class="token namespace">[Zh_CN]</span>
  LANGUAGE translation to install  	选择IBM-eucCN Chinese <span class="token punctuation">(</span>Simplified EUC<span class="token punctuation">)</span> <span class="token namespace">[zh_CN]</span>、UTF-8 Chinese                                             <span class="token punctuation">(</span>Simplified UTF<span class="token punctuation">)</span> <span class="token namespace">[ZH_CN]</span>、GB18030 S-Chinese <span class="token punctuation">(</span>GB18030<span class="token punctuation">)</span> <span class="token namespace">[Zh_CN]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>8、安装lsof<br>9、安装openssh和openssl<br>10、停止ftp和telnet服务。stopsrc -t ftp,stopsrc -t telnet<br>11、安装AIX必要的补丁包：</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">bos<span class="token punctuation">.</span>adt 
bos<span class="token punctuation">.</span>acct 
bos<span class="token punctuation">.</span>alt_disk_install
bos<span class="token punctuation">.</span>cifs_fs 
bos<span class="token punctuation">.</span>content_list 
bos<span class="token punctuation">.</span>compat
bos<span class="token punctuation">.</span><span class="token keyword">data</span> 
bos<span class="token punctuation">.</span>dlc  
bos<span class="token punctuation">.</span>dosutil        
bos<span class="token punctuation">.</span>lrn        
bos<span class="token punctuation">.</span>mh      
bos<span class="token punctuation">.</span>net        
bos<span class="token punctuation">.</span>perf  
bos<span class="token punctuation">.</span>sysmgt    
bos<span class="token punctuation">.</span>rte      
X11<span class="token punctuation">.</span>dt 
X11<span class="token punctuation">.</span>compat 
perl<span class="token punctuation">.</span>rte   
perfagent<span class="token punctuation">.</span>tools  
rsct<span class="token punctuation">.</span>basic   
rsct<span class="token punctuation">.</span>compat<span class="token punctuation">.</span>basic  
rsct<span class="token punctuation">.</span>compat<span class="token punctuation">.</span>clients  
rsct<span class="token punctuation">.</span>opt<span class="token punctuation">.</span>storagerm                
openssh<span class="token punctuation">.</span>base        
openssl<span class="token punctuation">.</span>base        
openssl<span class="token punctuation">.</span>license        
openssl<span class="token punctuation">.</span>man<span class="token punctuation">.</span>en_US    
openssh<span class="token punctuation">.</span>man<span class="token punctuation">.</span>en_US    
bos<span class="token punctuation">.</span>ahafs            
bos<span class="token punctuation">.</span>clvm<span class="token punctuation">.</span>enh    
bos<span class="token punctuation">.</span>cluster       <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>将对应的操作系统iso文件放置服务器例如&#x2F;backup&#x2F;soft目录下。iso文件在11.156.178.8上 D:\APP目录下，<br>挂载iso文件  loopmount在AIX6.1以后的版本才有。</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">cd <span class="token operator">/</span>backup/soft
loopmount <span class="token operator">-</span>i AIX7104SP3-1<span class="token punctuation">.</span>iso <span class="token operator">-</span>o <span class="token string">"-V cdrfs -o ro"</span> <span class="token operator">-</span>m <span class="token operator">/</span>mnt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>df -g 可以查看mnt文件系统了。<br>cd &#x2F;mnt&#x2F;installp&#x2F;ppc<br>smit installp  选择当前目录，选择你要安装的补丁包，有些包可能安装过，有些包可能安装了一部分，<br>卸载执行<br><code>loopumount -i AIX7104SP3-1.iso -m /mnt</code></p>
<h4 id="23、根据端口查看进程ID号"><a href="#23、根据端口查看进程ID号" class="headerlink" title="23、根据端口查看进程ID号"></a><strong>23、根据端口查看进程ID号</strong></h4><p>AIX:<br>root用户执行<br>netstat -Aan|grep 9010<br>查看占用端口的sock号，第一列。<br>rmsock  第一列 tcpcb    （tcp是这个）<br>rmsock  第一列 inpcb    （udp是这个）<br>可以看到进程ID号。</p>
<p>Linux:<br>netstat -lnp|grep 80</p>
<h4 id="24、HA双击切换演练"><a href="#24、HA双击切换演练" class="headerlink" title="24、HA双击切换演练"></a><strong>24、HA双击切换演练</strong></h4><p>HA主备&#x2F;HA互备<br>查看双机状态：<br>lssrc -ls clstrmgrES<br>以下状态为正常Current state: ST_STABLE</p>
<p>停掉本机HA<br>smit cl_stop<br>选择停止的节点，例如：dbnode， （在当前机器上执行，默认选择当前节点，不用选择）<br>BROADCAST 选择true，<br>Select An Action on Resource Groups 选择Move Resource Groups。<br>查看切换日志：<br>tail -f &#x2F;var&#x2F;hacmp&#x2F;log&#x2F;hacmp.out<br>lssrc -ls clstrmgrES 查看状态为ST_INIT<br>在B机可以看到所有资源信息，以及启动的应用程序<br>应用程序脚本在&#x2F;etc&#x2F;hascripts 下，或者&#x2F;etc&#x2F;hascript</p>
<p>执行# smit cl_start<br>选择需要启动的节点。（在当前机器上执行，默认选择当前节点，不用选择）<br>BROADCAST message at stargup 选择true<br>Startup Cluster Information Daemon选择true<br>执行大约10分钟。<br>lssrc -ls clstrmgrES 查看状态为ST_STABLE</p>
<h4 id="25、HA相关信息查看"><a href="#25、HA相关信息查看" class="headerlink" title="25、HA相关信息查看"></a><strong>25、HA相关信息查看</strong></h4><p>查看资源组信息</p>
<pre class="line-numbers language-none"><code class="language-none">root@CMAPP_P55A_MAIN:&#x2F;&gt; &#x2F;usr&#x2F;es&#x2F;sbin&#x2F;cluster&#x2F;utilities&#x2F;clRGinfo
Group Name     State                        Node           

 cmapp_res     ONLINE                       node1          
               OFFLINE                      node2  
cmdb_res       ONLINE                       node2          
               OFFLINE                      node1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>查看节点定义的资源组信息</p>
<pre class="line-numbers language-none"><code class="language-none">CMCONSOLE_P55A_STBY&#x2F;#&#x2F;usr&#x2F;es&#x2F;sbin&#x2F;cluster&#x2F;utilities&#x2F;clshowres

Resource Group Name                                 cmconsole_res 
Participating Node Name(s)                          node1 node2 
Startup Policy                                      Online Using Distribution Policy 
Fallover Policy                                     Fallover To Next Priority Node In The List 
Fallback Policy                                     Never Fallback 
Site Relationship                                   ignore 
Dynamic Node Priority                               
Service IP Label                                    cmconsole_svr 
Filesystems                                         ALL 
Filesystems Consistency Check                       fsck
Filesystems Recovery Method                         sequential
Filesystems&#x2F;Directories to be exported (NFSv2&#x2F;NFSv3)
Filesystems&#x2F;Directories to be exported (NFSv4)      
Filesystems to be NFS mounted                       
Network For NFS Mount                               
Filesystem&#x2F;Directory for NFSv4 Stable Storage       
Volume Groups                                       dmvg 
Concurrent Volume Groups                            
Use forced varyon for volume groups, if necessary   false 
Disks                                               
GMVG Replicated Resources                           
GMD Replicated Resources                            
PPRC Replicated Resources                           
ERCMF Replicated Resources                          
SVC PPRC Replicated Resources                       
Connections Services                                
Fast Connect Services                               
Shared Tape Resources                               
Application Servers                                 cmconsole_app 
Highly Available Communication Links                
Primary Workload Manager Class                      
Secondary Workload Manager Class                    
Delayed Fallback Timer                              
Miscellaneous Data                                  
Automatically Import Volume Groups                  false 
Inactive Takeover                                   
SSA Disk Fencing                                    false 
Filesystems mounted before IP configured            false
WPAR Name                                           
Run Time Parameters:

Node Name                                           node1
Debug Level                                         high 
Format for hacmp.out                                Standard 

Node Name                                           node2
Debug Level                                         high 
Format for hacmp.out                                Standard<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>列出集群的拓朴信息</p>
<pre class="line-numbers language-none"><code class="language-none">CMCONSOLE_P55A_STBY&#x2F;#&#x2F;usr&#x2F;es&#x2F;sbin&#x2F;cluster&#x2F;utilities&#x2F;cltopinfo 
Cluster Name: cmconsole_cluster
Cluster Connection Authentication Mode: Standard
Cluster Message Authentication Mode: None
Cluster Message Encryption: None
Use Persistent Labels for Communication: No
There are 2 node(s) and 2 network(s) defined

NODE node1:
        Network net_ether_01
                cmconsole_svr   11.156.33.105
                node1_boot1     11.156.33.106
                node1_boot2     1.1.33.105
        Network net_rs232_01
                node1_tty       &#x2F;dev&#x2F;tty0

NODE node2:
        Network net_ether_01
                cmconsole_svr   11.156.33.105
                node2_boot1     11.156.33.108
                node2_boot2     1.1.33.107
        Network net_rs232_01
                node2_tty       &#x2F;dev&#x2F;tty0

Resource Group cmconsole_res
        Startup Policy   Online Using Distribution Policy
        Fallover Policy  Fallover To Next Priority Node In The List
        Fallback Policy  Never Fallback
        Participating Nodes      node1 node2
        Service IP Label                 cmconsole_svr

Total Heartbeats Missed:        0
Cluster Topology Start Time:    10&#x2F;16&#x2F;2019 23:16:46<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>列出每个资源的集群资源设置</p>
<pre class="line-numbers language-none"><code class="language-none">CMCONSOLE_P55A_STBY&#x2F;#&#x2F;usr&#x2F;es&#x2F;sbin&#x2F;cluster&#x2F;utilities&#x2F;cllsres
APPLICATIONS&#x3D;&quot;cmconsole_app&quot;
FILESYSTEM&#x3D;&quot;&quot;
FORCED_VARYON&#x3D;&quot;false&quot;
FSCHECK_TOOL&#x3D;&quot;fsck&quot;
FS_BEFORE_IPADDR&#x3D;&quot;false&quot;
RECOVERY_METHOD&#x3D;&quot;sequential&quot;
SERVICE_LABEL&#x3D;&quot;cmconsole_svr&quot;
SSA_DISK_FENCING&#x3D;&quot;false&quot;
VG_AUTO_IMPORT&#x3D;&quot;false&quot;
VOLUME_GROUP&#x3D;&quot;dmvg&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>根据资源显示启动和停止脚本</p>
<pre class="line-numbers language-none"><code class="language-none">CMCONSOLE_P55A_STBY&#x2F;#&#x2F;usr&#x2F;es&#x2F;sbin&#x2F;cluster&#x2F;utilities&#x2F;cllsserv
#Name:Start_script:Stop_script
cmconsole_app:&#x2F;etc&#x2F;hascript&#x2F;ha_start.sh:&#x2F;etc&#x2F;hascript&#x2F;ha_stop.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>集群停止后无法查看，下面这个命令是集群状态监视器           </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">root@CMAPP_P55A_MAIN:/<span class="token operator">></span> /usr/sbin/cluster/clstat <span class="token parameter variable">-o</span>
clstat - HACMP Cluster Status Monitor
Cluster: cm_cluster     <span class="token punctuation">(</span><span class="token number">1388163864</span><span class="token punctuation">)</span>
Fri Oct <span class="token number">11</span> <span class="token number">21</span>:22:27 BEIST <span class="token number">2019</span>
State: UP           Nodes: <span class="token number">2</span>
SubState: STABLE             
Node: node1             State: UP
                    Interface: node1_boot2 <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>           Address: <span class="token number">1.1</span>.33.101
                                                         State:   UP
                    Interface: node1_boot1 <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>           Address: <span class="token number">11.156</span>.33.102
                                                         State:   DOWN
                    Interface: node1_tty0 <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>            Address: <span class="token number">0.0</span>.0.0
                                                         State:   UP
                    Interface: cmapp_svr <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>             Address: <span class="token number">11.156</span>.33.101
                                                         State:   UP
                    Resource Group: cmapp_res                    State:  On line
         
                 Node: node2             State: UP
                    Interface: node2_boot2 <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>           Address: <span class="token number">1.1</span>.33.103
                                                         State:   UP
                    Interface: node2_boot1 <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>           Address: <span class="token number">11.156</span>.33.104
                                                         State:   DOWN
                    Interface: node2_tty0 <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>            Address: <span class="token number">0.0</span>.0.0
                                                         State:   UP
                    Interface: cmdb_svr <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>              Address: <span class="token number">11.156</span>.33.103
                                                         State:   UP
                    Resource Group: cmdb_res                     State:  On line<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>lssrc -ls clstrmgrES 显示集群是否稳定，集群版本，动态节点优先级(pgspace可用，磁盘繁忙，cpu空闲)，</p>
<p>下面就几个状态做一下说明：<br>    ST_STABLE: 表示运行带有资源在线的集群服务<br>    NOT_CONFIGURED: 未配置集群或未同步节点(20191011 CM3停止时出现这个状态，多了一个资源组不在HA里面，无法正常停止)<br>    ST_INIT: 集群已在该节点上配置但未激活<br>    ST_JOINING: 集群节点正在加入群集<br>    ST_VOTING: 集群节点正在投票决定事件执行<br>    ST_PR_RUNNING: 集群正在运行恢复程序<br>    ST_PR_FAILED: 恢复程序事件脚本失败或启动集群失败<br>    ST_BARRIER: clstrmgr在事件等待之间存在障碍<br>    ST_CBARRIER: clstrmgr退出恢复程序<br>    ST_UNSTABLE: 集群通常由于事件错误而不稳定</p>
<p>lssrc -ls topsvcs 显示单个diskhb设备的状态，心跳间隔，故障周期(丢失的心跳)<br>lssrc -ls grpsvcs 提供有关已连接客户端的信息，组数<br>lssrc -ls emsvcs  显示事件管理子系统已知的资源监视器<br>lssrc -ls snmpd   显示有关snmpd<br>lslpp -l | grep cluster.es.server.rte 查看双机版本</p>
<h4 id="26、删除重复路由"><a href="#26、删除重复路由" class="headerlink" title="26、删除重复路由"></a><strong>26、删除重复路由</strong></h4><p>YZH-SC-NPOS-M&#x2F;#route delete -if en3 default 11.156.33.254</p>
<h4 id="27、文件系统扩容（HA）"><a href="#27、文件系统扩容（HA）" class="headerlink" title="27、文件系统扩容（HA）"></a>27、文件系统扩容（HA）</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span>、生成PVID
chdev <span class="token parameter variable">-l</span> hdisk26 <span class="token parameter variable">-a</span> <span class="token assign-left variable">pv</span><span class="token operator">=</span>yes
chdev <span class="token parameter variable">-l</span> hdisk27 <span class="token parameter variable">-a</span> <span class="token assign-left variable">pv</span><span class="token operator">=</span>yes
chdev <span class="token parameter variable">-l</span> hdisk28 <span class="token parameter variable">-a</span> <span class="token assign-left variable">pv</span><span class="token operator">=</span>yes
chdev <span class="token parameter variable">-l</span> hdisk29 <span class="token parameter variable">-a</span> <span class="token assign-left variable">pv</span><span class="token operator">=</span>yes

<span class="token number">2</span>、查看同VG所属磁盘属性
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span>lspv<span class="token operator">|</span><span class="token function">grep</span> sharedbvg<span class="token operator">|</span><span class="token function">awk</span> '<span class="token punctuation">&#123;</span>print $1<span class="token punctuation">&#125;</span><span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token punctuation">\</span>
<span class="token assign-left variable">INFO</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>lsattr <span class="token parameter variable">-El</span> $i<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'reserve_policy'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $1" --> "$2&#125;'</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$i</span>: <span class="token variable">$INFO</span>"</span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token keyword">done</span>

<span class="token number">3</span>、更改新盘属性
chdev <span class="token parameter variable">-l</span> hdisk26 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve
chdev <span class="token parameter variable">-l</span> hdisk27 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve
chdev <span class="token parameter variable">-l</span> hdisk28 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve
chdev <span class="token parameter variable">-l</span> hdisk29 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve

<span class="token number">4</span>、将新盘加入VG共享组
smitty hacmp
	--<span class="token operator">></span>System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>
		--<span class="token operator">></span>HACMP Logical Volume Management
			--<span class="token operator">></span>Shared Volume Groups
			  --<span class="token operator">></span>Set Characteristics of a Shared Volume Group
			    --<span class="token operator">></span> Add a Volume to a Shared Volume Group  
			    <span class="token comment">#第一个弹出界面显示的是所有VG，选择要加盘的VG然后确认</span>
			    <span class="token comment">#第二个弹出界面显示的是要加新盘，选择需要加入VG的盘确认</span>
			    <span class="token comment">#最后出现如下图的界面，确认没问题后回车</span>
			    Resource Group Name                                 zcfzres                 
			    VOLUME GROUP name                                   sharevg                
			    Reference <span class="token function">node</span>                                      node1                  
          VOLUME names                                        hdisk26 hdisk28 hdisk27

<span class="token number">5</span>、查看新加盘是否加入VG
ZCFZ_P720_MAIN/<span class="token comment">#lspv                                                                         </span>
hdisk0          00f683e8fa182e08          rootvg          active   
hdisk1          00f683e822a86333          rootvg          active   
hdisk2          00f683e80bcb3bb6          datavg          active   
hdisk3          00f683e836066cc5          datavg          active   
hdisk4          00f683e836e9cb71          sharevg         active   
hdisk5          00f683e836ec4c73          sharevg         active   
hdisk6          00f683e836ec4e1f          sharevg         active   
hdisk7          00f683e836ec4fd7          sharevg         active   
hdisk8          00f683e836ec516f          sharevg         active   
hdisk9          00f683e836ec5320          sharevg         active   
hdisk10         00f683e836ec54b9          sharevg         active   
hdisk11         00f683e836ec566a          sharevg         active   
hdisk12         00f683e836ec5814          sharevg         active   
hdisk13         00f683e836ec59ca          sharevg         active   
hdisk14         00f683e836ec5b6d          sharevg         active   
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.         <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>          <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.         <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
hdisk26         00f683e836ec5d23          sharevg         active   
hdisk27         00f683e836ec5ed1          sharevg         active   
hdisk28         00f683e836ec6083          sharevg         active   
hdisk29         00f683e836ec628d          sharevg         active                   
ZCFZ_P720_MAIN/<span class="token comment">#lsvg sharevg                                                                 </span>
VOLUME GROUP:       sharevg                  VG IDENTIFIER:  00f683e800004c000000013836ed7f09
VG STATE:           active                   PP SIZE:        <span class="token number">1024</span> megabyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>                
VG PERMISSION:      read/write               TOTAL PPs:      <span class="token number">1577</span> <span class="token punctuation">(</span><span class="token number">1614848</span> megabytes<span class="token punctuation">)</span>        
MAX LVs:            <span class="token number">256</span>                      FREE PPs:       <span class="token number">597</span> <span class="token punctuation">(</span><span class="token number">611328</span> megabytes<span class="token punctuation">)</span>          
LVs:                <span class="token number">4</span>                        USED PPs:       <span class="token number">980</span> <span class="token punctuation">(</span><span class="token number">1003520</span> megabytes<span class="token punctuation">)</span>         
OPEN LVs:           <span class="token number">4</span>                        QUORUM:         <span class="token number">12</span> <span class="token punctuation">(</span>Enabled<span class="token punctuation">)</span>                    
TOTAL PVs:          <span class="token number">23</span>                       VG DESCRIPTORS: <span class="token number">23</span>                              
STALE PVs:          <span class="token number">0</span>                        STALE PPs:      <span class="token number">0</span>                               
ACTIVE PVs:         <span class="token number">23</span>                       AUTO ON:        no                              
MAX PPs per VG:     <span class="token number">32512</span>                                                                    
MAX PPs per PV:     <span class="token number">1016</span>                     MAX PVs:        <span class="token number">32</span>                              
LTG size <span class="token punctuation">(</span>Dynamic<span class="token punctuation">)</span>: <span class="token number">256</span> kilobyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>          AUTO SYNC:      no                              
HOT SPARE:          no                       BB POLICY:      relocatable 

<span class="token number">6</span>、对文件系统进行扩容
smitty hacmp                                                
	--<span class="token operator">></span>System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>         
		--<span class="token operator">></span>HACMP Logical Volume Management  
			--<span class="token operator">></span>Shared File Systems
			  --<span class="token operator">></span>Enhanced Journaled File Systems
			    --<span class="token operator">></span>Change / Show Characteristics of a Shared Enhanced Journaled File System         
			    <span class="token comment">#回车后会弹出对话框，里面会列出目录，选择需要扩的目录挂载点，然后确认</span>
Resource Group Name                  zcfzres                              	  File system name                     /ora_data                                 NEW <span class="token function">mount</span> point                      <span class="token punctuation">[</span>/ora_data<span class="token punctuation">]</span>                               SIZE of <span class="token function">file</span> system                  <span class="token punctuation">[</span><span class="token number">3198156800</span><span class="token punctuation">]</span>                               Mount GROUP                           <span class="token punctuation">[</span><span class="token punctuation">]</span>                                       Mount AUTOMATICALLY at system restart?   no                                +
            PERMISSIONS                                         read/write                        +
            Mount OPTIONS                                      <span class="token punctuation">[</span><span class="token punctuation">]</span>                                 +
            Start Disk Accounting?                              no                                +
            Block Size <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>                                  <span class="token number">4096</span>                               
            Inline Log?                                         no                                 
            Inline Log size <span class="token punctuation">(</span>MBytes<span class="token punctuation">)</span>                            <span class="token number">0</span>  
           <span class="token comment">#确认没问题后回车</span>
<span class="token number">7</span>、确认文件系统是否扩容成功
<span class="token function">df</span> <span class="token parameter variable">-g</span> /ora_data                                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="28、确定磁带是本地盘还是存储盘"><a href="#28、确定磁带是本地盘还是存储盘" class="headerlink" title="28、确定磁带是本地盘还是存储盘"></a>28、确定磁带是本地盘还是存储盘</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZH-NRGLHC-1<span class="token comment">#lsdev -Cc disk</span>
hdisk0  Available 01-00-00 SAS Disk Drive   <span class="token comment">#SAS是本地盘</span>
hdisk1  Available 01-00-00 SAS Disk Drive
hdisk2  Available 01-00-00 SAS Disk Drive
hdisk3  Available 01-00-00 SAS Disk Drive
hdisk4  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>  <span class="token comment">#Hitachi存储盘</span>
hdisk5  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk6  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk7  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk8  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk9  Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk10 Available 05-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="29、修改磁盘的负载均衡模式"><a href="#29、修改磁盘的负载均衡模式" class="headerlink" title="29、修改磁盘的负载均衡模式"></a>29、修改磁盘的负载均衡模式</h4><p><code>chdev -l hdisk52  -a reserve_policy=no_reserve -a algorithm=round_robin  </code></p>
<h4 id="30、查看小机网卡绑定"><a href="#30、查看小机网卡绑定" class="headerlink" title="30、查看小机网卡绑定"></a>30、查看小机网卡绑定</h4><p>root@grwyapp3:&#x2F;&gt;<code> lsattr -El ent6</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adapter_names   ent0,ent2      EtherChannel Adapters                           True
alt_addr        0x000000000000 Alternate EtherChannel Address                  True
auto_recovery   <span class="token function">yes</span>            Enable automatic recovery after failover        True
backup_adapter  NONE           Adapter used when whole channel fails           True
hash_mode       default        Determines how outgoing adapter is chosen       True
interval        long           Determines interval value <span class="token keyword">for</span> IEEE <span class="token number">802</span>.3ad mode True
mode            standard       EtherChannel mode of operation                  True
netaddr         <span class="token number">0</span>              Address to <span class="token function">ping</span>                                 True
noloss_failover <span class="token function">yes</span>            Enable lossless failover after <span class="token function">ping</span> failure     True
num_retries     <span class="token number">3</span>              Times to retry <span class="token function">ping</span> before failing              True
retry_time      <span class="token number">1</span>              Wait <span class="token function">time</span> <span class="token punctuation">(</span>in seconds<span class="token punctuation">)</span> between pings            True
use_alt_addr    no             Enable Alternate EtherChannel Address           True
use_jumbo_frame no             Enable Gigabit Ethernet Jumbo Frames            True<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>root@grwyapp3:&#x2F;&gt; <code>lsdev -Cc adapter</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ent0    Available 04-00 <span class="token number">2</span>-Port <span class="token number">10</span>/100/1000 Base-TX PCI-Express Adapter <span class="token punctuation">(</span><span class="token number">14104003</span><span class="token punctuation">)</span>  <span class="token comment"># 属性和其它不一样</span>
ent1    Available 04-01 <span class="token number">2</span>-Port <span class="token number">10</span>/100/1000 Base-TX PCI-Express Adapter <span class="token punctuation">(</span><span class="token number">14104003</span><span class="token punctuation">)</span> <span class="token comment"># 属性和其它不一样</span>
ent2    Available 03-00 <span class="token number">4</span>-Port Gigabit Ethernet PCI-Express Adapter <span class="token punctuation">(</span>e414571614102004<span class="token punctuation">)</span>
ent3    Available 03-01 <span class="token number">4</span>-Port Gigabit Ethernet PCI-Express Adapter <span class="token punctuation">(</span>e414571614102004<span class="token punctuation">)</span>
ent4    Available 03-02 <span class="token number">4</span>-Port Gigabit Ethernet PCI-Express Adapter <span class="token punctuation">(</span>e414571614102004<span class="token punctuation">)</span>
ent5    Available 03-03 <span class="token number">4</span>-Port Gigabit Ethernet PCI-Express Adapter <span class="token punctuation">(</span>e414571614102004<span class="token punctuation">)</span>
ent6    Available       EtherChannel / IEEE <span class="token number">802</span>.3ad Link Aggregation
fcs0    Available 06-00 4Gb FC PCI Express Adapter <span class="token punctuation">(</span>df1000fe<span class="token punctuation">)</span>
fcs1    Available 06-01 4Gb FC PCI Express Adapter <span class="token punctuation">(</span>df1000fe<span class="token punctuation">)</span>
fcs2    Available 07-00 4Gb FC PCI Express Adapter <span class="token punctuation">(</span>df1000fe<span class="token punctuation">)</span>
fcs3    Available 07-01 4Gb FC PCI Express Adapter <span class="token punctuation">(</span>df1000fe<span class="token punctuation">)</span>
sa0     Available 09-00 <span class="token number">4</span> Port Async EIA-232 PCIe Adapter
sissas0 Defined   00-00 PCIe x4 Planar 3Gb SAS Adapter
sissas1 Available 02-00 PCIe x4 Internal 3Gb SAS Adapter
usbhc0  Defined   08-08 USB Host Controller <span class="token punctuation">(</span><span class="token number">33103500</span><span class="token punctuation">)</span>
usbhc1  Defined   08-09 USB Host Controller <span class="token punctuation">(</span><span class="token number">33103500</span><span class="token punctuation">)</span>
usbhc2  Defined   08-0a USB Enhanced Host Controller <span class="token punctuation">(</span>3310e000<span class="token punctuation">)</span>
vsa0    Available       LPAR Virtual Serial Adapter
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>root@grwyapp3:&#x2F;&gt; <code>netstat -v en6</code></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>省略<span class="token punctuation">..</span><span class="token punctuation">..</span>
Statistics <span class="token keyword">for</span> every adapter <span class="token keyword">in</span> the EtherChannel:
-------------------------------------------------

Number of adapters: <span class="token number">2</span>    <span class="token comment">#  显示几块网卡</span>
Operating mode: Standard mode  <span class="token comment">#  使用什么模式</span>
Hash mode: Destination IP address

-------------------------------------------------------------
ETHERNET STATISTICS <span class="token punctuation">(</span>ent0<span class="token punctuation">)</span> <span class="token builtin class-name">:</span>  <span class="token comment"># 关联的网卡</span>
Device Type: <span class="token number">2</span>-Port <span class="token number">10</span>/100/1000 Base-TX PCI-Express Adapter <span class="token punctuation">(</span><span class="token number">14104003</span><span class="token punctuation">)</span>
Hardware Address: <span class="token number">40</span>:f2:e9:14:3f:d0
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>省略<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
ETHERNET STATISTICS <span class="token punctuation">(</span>ent2<span class="token punctuation">)</span> <span class="token builtin class-name">:</span>  <span class="token comment"># 关联的网卡</span>
Device Type: Gigabit Ethernet PCIe Adapter <span class="token punctuation">(</span>e4145716e4142004<span class="token punctuation">)</span>
Hardware Address: <span class="token number">40</span>:f2:e9:14:3f:d0
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>省略<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="31、查看磁盘属性"><a href="#31、查看磁盘属性" class="headerlink" title="31、查看磁盘属性"></a>31、查看磁盘属性</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> a.txt<span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> lsattr <span class="token parameter variable">-El</span> <span class="token variable">$i</span> <span class="token operator">|</span> <span class="token function">grep</span> reserve_policy <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1,$2&#125;'</span><span class="token punctuation">;</span><span class="token keyword">done</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> a.txt<span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> lsattr <span class="token parameter variable">-El</span> <span class="token variable">$i</span> <span class="token operator">|</span> <span class="token function">grep</span> PR_exclusive <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-v</span> <span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token variable">$i</span> <span class="token string">'&#123;print var,$1,$2&#125;'</span><span class="token punctuation">;</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h4 id="32、给历史命令添加时间"><a href="#32、给历史命令添加时间" class="headerlink" title="32、给历史命令添加时间"></a>32、给历史命令添加时间</h4><p><code>echo &quot;export EXTENDED_HISTORY=ON&quot; &gt;&gt; /etc/profile</code></p>
<p>查看：<code>fc -t</code></p>
<h4 id="33、查看VG的类型"><a href="#33、查看VG的类型" class="headerlink" title="33、查看VG的类型"></a>33、查看VG的类型</h4><p>说明：0 为普通VG（最大32个PV） 1为BIG（最大128个PV） 2为Scalable（最大1024个PV）</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZHCM3DB/usr/sbin<span class="token comment">#lqueryvg -tp /dev/hdisk744</span>
Max LVs:        <span class="token number">256</span>
PP Size:        <span class="token number">30</span>
Free PPs:       <span class="token number">7</span>
LV count:       <span class="token number">3</span>
PV count:       <span class="token number">32</span>
Total VGDAs:    <span class="token number">32</span>
Conc Allowed:   <span class="token number">0</span>
MAX PPs per PV: <span class="token number">1016</span>
MAX PVs:        <span class="token number">32</span>
Quorum <span class="token punctuation">(</span>disk<span class="token punctuation">)</span>:  <span class="token number">1</span>
Auto Varyon ?:  <span class="token number">0</span>
Conc Autovaryon <span class="token number">0</span>
Varied on Conc: <span class="token number">0</span>
Total PPs:      <span class="token number">2568</span>
LTG size:       <span class="token number">128</span>
HOT SPARE:      <span class="token number">0</span>
AUTO SYNC:      <span class="token number">0</span>
VG PERMISSION:  <span class="token number">0</span>
SNAPSHOT VG:    <span class="token number">0</span>
IS_PRIMARY VG:  <span class="token number">0</span>
PSNFSTPP:       <span class="token number">4352</span>
VG Type:        <span class="token number">0</span>
Max PPs:        <span class="token number">32512</span>
Mirror Pool Str n
PV RESTRICTION: ???????
Infinite Retry: <span class="token number">2</span>
Varyon State:   <span class="token number">0</span>
Disk Block Size <span class="token number">512</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="34、查看端口号和进程"><a href="#34、查看端口号和进程" class="headerlink" title="34、查看端口号和进程"></a>34、查看端口号和进程</h4><p>1）查看端口信息</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">1363</span>
f1000f00039343b8 tcp4       <span class="token number">0</span>      <span class="token number">0</span>  <span class="token number">192.196</span>.128.42.1363   *.*                   LISTEN
f1000f0003917200 udp4       <span class="token number">0</span>      <span class="token number">0</span>  *.1363                *.* <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>2）如果是tcp连接，则使用</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rmsock f1000f00039343b8 tcpcb
The socket 0xf1000f0003934008 is being held by proccess <span class="token number">12911014</span> <span class="token punctuation">(</span>cdpmgr<span class="token punctuation">)</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>3）根据PID查询详细信息</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">12911014</span>
    root <span class="token number">12911014</span>        <span class="token number">1</span>   <span class="token number">0</span> 02:37:10      -  <span class="token number">0</span>:00 /cdadmin/ibmcd/ndm/bin/cdpmgr <span class="token parameter variable">-i</span> /cdadmin/ibmcd/ndm/cfg/CD_ZFLY_APP1/initparm.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>那么反过来，知道进程服务pid，查找其通信端口号</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$line</span> <span class="token variable"><span class="token variable">`</span>rmsock $line tcpcb <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $(NF-1)&#125;'</span><span class="token variable">`</span></span>"</span><span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">>></span> myfile20210441.txt <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>

<span class="token function">grep</span> <span class="token number">12911014</span> myfile20210441.txt
f1000f00039343b8 <span class="token number">12911014</span>
f1000f0003933bb8 <span class="token number">12911014</span>

<span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">grep</span> f1000f00039343b8
f1000f00039343b8 tcp4       <span class="token number">0</span>      <span class="token number">0</span>  <span class="token number">192.196</span>.128.42.1363   *.*                 LISTEN
<span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">grep</span> f1000f0003933bb8
f1000f0003933bb8 tcp4       <span class="token number">0</span>      <span class="token number">0</span>  <span class="token number">192.196</span>.128.42.1364   *.*                   LISTEN

<span class="token comment">#验证</span>
<span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">1364</span>
f1000f0003933bb8 tcp4       <span class="token number">0</span>      <span class="token number">0</span>  <span class="token number">192.196</span>.128.42.1364   *.*                   LISTEN

<span class="token comment"># 合并到一起</span>
<span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$line</span> <span class="token variable"><span class="token variable">`</span>rmsock $line tcpcb <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $(NF-1)&#125;'</span><span class="token variable">`</span></span>"</span><span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">>></span> myfile20210441.txt <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span>
<span class="token function">netstat</span> <span class="token parameter variable">-Aan</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> `ps -ef<span class="token operator">|</span><span class="token function">grep</span> <span class="token function">rsync</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $2&#125;'</span>` myfile20210441.txt <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="35、添加定时任务"><a href="#35、添加定时任务" class="headerlink" title="35、添加定时任务"></a>35、添加定时任务</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">grep</span> hwclock /var/spool/cron/crontabs/root<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'0 3 * * * root /sbin/hwclock -w'</span> <span class="token operator">>></span> /var/spool/cron/crontabs/root<span class="token punctuation">;</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="36、AIX系统HA扩容"><a href="#36、AIX系统HA扩容" class="headerlink" title="36、AIX系统HA扩容"></a>36、AIX系统HA扩容</h4><p>一、识别硬盘</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cfgmgr<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>二、生成PVID</p>
<pre class="line-numbers language-SH" data-language="SH"><code class="language-SH"># 两边机器都要执行
chdev -l hdisk26 -a pv&#x3D;yes
chdev -l hdisk27 -a pv&#x3D;yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>三、查看同VG硬盘属性</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 执行下面命令查看</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span>lspv<span class="token operator">|</span><span class="token function">grep</span> sharedbvg<span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span><span class="token operator">|</span><span class="token function">head</span> <span class="token parameter variable">-3</span><span class="token variable">`</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token punctuation">\</span>
<span class="token assign-left variable">INFO</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>lsattr <span class="token parameter variable">-El</span> $i<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'reserve_policy'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $1" --> "$2&#125;'</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$i</span>: <span class="token variable">$INFO</span>"</span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token keyword">done</span>
<span class="token comment"># 范例</span>
CMHOUDU_P720_DB/<span class="token comment">#for i in `lspv|grep sharedbvg|awk '&#123;print $1&#125;'|head -3`;do \</span>
<span class="token assign-left variable">INFO</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>lsattr <span class="token parameter variable">-El</span> $i<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'reserve_policy'</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $1" --> "$2&#125;'</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$i</span>: <span class="token variable">$INFO</span>"</span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
done<span class="token operator">></span> <span class="token operator">></span> <span class="token operator">></span>
hdisk4: reserve_policy --<span class="token operator">></span> no_reserve
hdisk5: reserve_policy --<span class="token operator">></span> no_reserve
hdisk6: reserve_policy --<span class="token operator">></span> no_reserve<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>四、更改磁盘属性</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chdev <span class="token parameter variable">-l</span> hdisk26 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve
chdev <span class="token parameter variable">-l</span> hdisk27 <span class="token parameter variable">-a</span> <span class="token assign-left variable">reserve_policy</span><span class="token operator">=</span>no_reserve<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>五、添加硬盘</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 第一种显示情况</span>
smitty hacmp--- System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>-- Storage --- Volume Groups -- Set Characteristics of a Volume Group-- Add a Volume to a Volume Group--选择需要扩容的VG回车--然后选择添加的硬盘---确定
<span class="token comment"># 第二种显示情况</span>
smitty hacmp
	--<span class="token operator">></span>System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>
		--<span class="token operator">></span>HACMP Logical Volume Management
			--<span class="token operator">></span>Shared Volume Groups
			  --<span class="token operator">></span>Set Characteristics of a Shared Volume Group
			    --<span class="token operator">></span> Add a Volume to a Shared Volume Group  
			    <span class="token comment">#第一个弹出界面显示的是所有VG，选择要加盘的VG然后确认</span>
			    <span class="token comment">#第二个弹出界面显示的是要加新盘，选择需要加入VG的盘确认</span>
			    <span class="token comment">#最后出现如下图的界面</span>
			    Resource Group Name                                 zcfzres                 
			    VOLUME GROUP name                                   sharevg                
			    Reference <span class="token function">node</span>                                      node1                  
                VOLUME names
                <span class="token comment"># 确认没问题后回车</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>六、查看新盘是否加入VG，并确认VG有剩余空间</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ZCFZ_P720_MAIN/<span class="token comment">#lspv                                                                         </span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>                
hdisk10         00f683e836ec54b9                    sharevg         active                   
hdisk11         00f683e836ec566a                    sharevg         active                   
hdisk12         00f683e836ec5814                    sharevg         active                   
hdisk13         00f683e836ec59ca                    sharevg         active    

ZCFZ_P720_MAIN/<span class="token comment">#lsvg sharevg                                                                 </span>
VOLUME GROUP:       sharevg                  VG IDENTIFIER:  00f683e800004c000000013836ed7f09
VG STATE:           active                   PP SIZE:        <span class="token number">1024</span> megabyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>                
VG PERMISSION:      read/write               TOTAL PPs:      <span class="token number">1577</span> <span class="token punctuation">(</span><span class="token number">1614848</span> megabytes<span class="token punctuation">)</span>        
MAX LVs:            <span class="token number">256</span>                      FREE PPs:       <span class="token number">597</span> <span class="token punctuation">(</span><span class="token number">611328</span> megabytes<span class="token punctuation">)</span>  <span class="token comment"># 剩余597G     </span>
LVs:                <span class="token number">4</span>                        USED PPs:       <span class="token number">980</span> <span class="token punctuation">(</span><span class="token number">1003520</span> megabytes<span class="token punctuation">)</span>         
OPEN LVs:           <span class="token number">4</span>                        QUORUM:         <span class="token number">12</span> <span class="token punctuation">(</span>Enabled<span class="token punctuation">)</span>                    
TOTAL PVs:          <span class="token number">23</span>                       VG DESCRIPTORS: <span class="token number">23</span>                              
STALE PVs:          <span class="token number">0</span>                        STALE PPs:      <span class="token number">0</span>                               
ACTIVE PVs:         <span class="token number">23</span>                       AUTO ON:        no                              
MAX PPs per VG:     <span class="token number">32512</span>                                                                    
MAX PPs per PV:     <span class="token number">1016</span>                     MAX PVs:        <span class="token number">32</span>                              
LTG size <span class="token punctuation">(</span>Dynamic<span class="token punctuation">)</span>: <span class="token number">256</span> kilobyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>          AUTO SYNC:      no                              
HOT SPARE:          no                       BB POLICY:      relocatable<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>七、文件系统扩容</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 第一种显示情况</span>
smitty hacmp--- System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>-- Storage --- File Systems --- Change / Show Characteristics of a File System --- 选择要扩容的目录，回车 --- 在Unit Size选择Gigabytes单位，在Number of Units写扩容后的总大小 --- 确定
<span class="token comment"># 第二种显示情况</span>
smitty hacmp                                                
	--<span class="token operator">></span>System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>         
		--<span class="token operator">></span>HACMP Logical Volume Management  
			--<span class="token operator">></span>Shared File Systems
			  --<span class="token operator">></span>Enhanced Journaled File Systems
			    --<span class="token operator">></span>Change / Show Characteristics of a Shared Enhanced Journaled File System         
			    <span class="token comment">#回车后会弹出对话框，里面会列出目录，选择需要扩的目录挂载点，然后确认</span>
			    Resource Group Name                         zcfzres                              
			      File system name                         /ora_data                          
            NEW <span class="token function">mount</span> point                                <span class="token punctuation">[</span>/ora_data<span class="token punctuation">]</span>                         
            SIZE of <span class="token function">file</span> system                            <span class="token punctuation">[</span><span class="token number">3198156800</span><span class="token punctuation">]</span>  <span class="token comment"># 计算：总大小/1024/1024/2  </span>
            Mount GROUP                                    <span class="token punctuation">[</span><span class="token punctuation">]</span>                                  
            Mount AUTOMATICALLY at system restart?         no                                +
            PERMISSIONS                                    read/write                        +
            Mount OPTIONS                                  <span class="token punctuation">[</span><span class="token punctuation">]</span>                                +
            Start Disk Accounting?                         no                                +
            Block Size <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>                             <span class="token number">4096</span>                               
            Inline Log?                                    no                                 
            Inline Log size <span class="token punctuation">(</span>MBytes<span class="token punctuation">)</span>                       <span class="token number">0</span>  
           <span class="token comment">#确认没问题后回车</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>八、如果扩容失败，可能是因为LV pps数不够</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 确认LV支持的最大的PP数</span>
CMHOUDU_P720_DB/<span class="token comment">#lslv lsdata_lv</span>
LOGICAL VOLUME:     lsdata_lv              VOLUME GROUP:   sharedbvg
LV IDENTIFIER:      00f827d500004c0000000145022b01ba.4 PERMISSION:     read/write
VG STATE:           active/complete        LV STATE:       opened/syncd
TYPE:               jfs2                   WRITE VERIFY:   off
MAX LPs:            <span class="token number">2048</span> <span class="token comment"># 最大数           PP SIZE:        1024 megabyte(s)  # pp大小</span>
COPIES:             <span class="token number">1</span>                      SCHED POLICY:   parallel
LPs:                <span class="token number">1740</span> <span class="token comment"># 当前已使用pp数    PPs:            1740</span>
STALE PPs:          <span class="token number">0</span>                      BB POLICY:      relocatable
INTER-POLICY:       minimum                RELOCATABLE:    <span class="token function">yes</span>
INTRA-POLICY:       middle                 UPPER BOUND:    <span class="token number">128</span>
MOUNT POINT:        /lsdata                LABEL:          /lsdata
DEVICE <span class="token environment constant">UID</span><span class="token builtin class-name">:</span>         <span class="token number">0</span>                      DEVICE GID:     <span class="token number">0</span>
DEVICE PERMISSIONS: <span class="token number">432</span>
MIRROR WRITE CONSISTENCY: on/ACTIVE
EACH LP COPY ON A SEPARATE PV ?: <span class="token function">yes</span>
Serialize IO ?:     NO
INFINITE RETRY:     no

<span class="token comment"># 说明： 如果要扩的空间超过最大PP数，如扩容3T，但当前lsdata_lv最大支持为2T，这时如果直接目录扩容，就会报错</span>
Command: failed        stdout: <span class="token function">yes</span>           stderr: no
Before <span class="token builtin class-name">command</span> completion, additional instructions may appear below.
cl_chfs: Error executing chfs  <span class="token parameter variable">-A</span> no <span class="token parameter variable">-a</span> <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token string">"16728981504"</span> /jzhobjdata3 on <span class="token function">node</span> appnode
Error detail:
    appnode: 0516-787 extendlv: Maximum allocation <span class="token keyword">for</span> logical volume jzhobjdata3_lv
    appnode:    is <span class="token number">7000</span>.
    appnode: <span class="token assign-left variable">RETURN_CODE</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token comment"># 解决方法：就是加大 MAX Lps数量</span>
smitty hacmp--- System Management <span class="token punctuation">(</span>C-SPOC<span class="token punctuation">)</span>-- Storage --- Logical Volumes --- Change a Logical Volume --- 在弹出的第一个对话框中选择LV所在的VG，回车 --- 在弹出的第二个对话框中选择要扩展的LV名称，回车 --- 修改如下选项
MAXIMUM NUMBER of LOGICAL PARTITIONS   <span class="token punctuation">[</span><span class="token number">5000</span><span class="token punctuation">]</span>，其它不动，然后回车<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="37、检查僵尸进程"><a href="#37、检查僵尸进程" class="headerlink" title="37、检查僵尸进程"></a>37、检查僵尸进程</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZH-SC-XYK-APP/<span class="token comment">#ps -efl|pg|grep "Z"</span>
   F   S      <span class="token environment constant">UID</span>      PID     <span class="token environment constant">PPID</span>     C PRI NI ADDR    SZ    WCHAN    STIME    TTY  TIME CMD
 <span class="token number">50804</span> Z    bjnsfa  <span class="token number">13959410</span>  <span class="token number">18350246</span>  <span class="token number">0</span> <span class="token number">255</span> <span class="token number">20</span>  <span class="token number">0</span>:00                              <span class="token operator">&lt;</span>defunct<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="38、显示物理卷信息"><a href="#38、显示物理卷信息" class="headerlink" title="38、显示物理卷信息"></a>38、显示物理卷信息</h4><p>1）显示系统定义和已配置的物理卷</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ lsdev <span class="token parameter variable">-Cc</span> disk <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-8</span>
hdisk0   Available 00-00-00 SAS Disk Drive
hdisk1   Available 00-00-00 SAS Disk Drive
hdisk2   Available 00-00-00 SAS Disk Drive
hdisk3   Available 00-00-00 SAS Disk Drive
hdisk4   Available 04-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk5   Available 04-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk6   Available 04-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span>
hdisk7   Available 04-00-02 Hitachi Disk Array <span class="token punctuation">(</span>Fibre<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2）显示一个物理卷的属性</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ lspv hdisk0
PHYSICAL VOLUME:    hdisk0                   VOLUME GROUP:     rootvg
PV IDENTIFIER:      00f996632b2b9dc0 VG IDENTIFIER     00f9966000004c000000014b7c4bae8a
PV STATE:           active                                     
STALE PARTITIONS:   <span class="token number">0</span>                        ALLOCATABLE:      <span class="token function">yes</span>
PP SIZE:            <span class="token number">512</span> megabyte<span class="token punctuation">(</span>s<span class="token punctuation">)</span>          LOGICAL VOLUMES:  <span class="token number">12</span>
TOTAL PPs:          <span class="token number">558</span> <span class="token punctuation">(</span><span class="token number">285696</span> megabytes<span class="token punctuation">)</span>   VG DESCRIPTORS:   <span class="token number">1</span>
FREE PPs:           <span class="token number">382</span> <span class="token punctuation">(</span><span class="token number">195584</span> megabytes<span class="token punctuation">)</span>   HOT SPARE:        no
USED PPs:           <span class="token number">176</span> <span class="token punctuation">(</span><span class="token number">90112</span> megabytes<span class="token punctuation">)</span>    MAX REQUEST:      <span class="token number">1</span> megabyte
FREE DISTRIBUTION:  <span class="token number">111</span><span class="token punctuation">..</span><span class="token number">39</span><span class="token punctuation">..</span>09<span class="token punctuation">..</span><span class="token number">111</span><span class="token punctuation">..</span><span class="token number">112</span>                      
USED DISTRIBUTION:  01<span class="token punctuation">..</span><span class="token number">73</span><span class="token punctuation">..</span><span class="token number">102</span><span class="token punctuation">..</span>00<span class="token punctuation">..</span>00                        
MIRROR POOL:        None                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>3）显示一个物理卷上分布的逻辑卷</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZHCM3DB/<span class="token comment">#lspv -l hdisk761</span>
hdisk761:
LV NAME               LPs     PPs     DISTRIBUTION          MOUNT POINT
archivelog-lv         <span class="token number">499</span>     <span class="token number">499</span>     <span class="token number">100</span><span class="token punctuation">..</span><span class="token number">100</span><span class="token punctuation">..</span><span class="token number">99</span><span class="token punctuation">..</span><span class="token number">100</span><span class="token punctuation">..</span><span class="token number">100</span> /rmdata<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>4）显示物理卷上每个逻辑卷物理分布情况，同时显示逻辑卷类型和文件mount点</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">YZHCM3DB/<span class="token comment">#lspv -p hdisk761</span>
hdisk761:
PP RANGE  STATE   REGION        LV NAME             TYPE       MOUNT POINT
  <span class="token number">1</span>-100   used    outer edge    archivelog-lv       jfs2       /rmdata
<span class="token number">101</span>-200   used    outer middle  archivelog-lv       jfs2       /rmdata
<span class="token number">201</span>-299   used    center        archivelog-lv       jfs2       /rmdata
<span class="token number">300</span>-399   used    inner middle  archivelog-lv       jfs2       /rmdata
<span class="token number">400</span>-499   used    inner edge    archivelog-lv       jfs2       /rmdata<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>5）显示物理分区和逻辑分区的对应情况</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ lspv <span class="token parameter variable">-M</span> hdisk761 <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-3</span>
hdisk761:1      archivelog-lv:1199      
hdisk761:2      archivelog-lv:1200      
hdisk761:3      archivelog-lv:1201<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>












                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Miaohsukang</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://miaohsukang.gitee.io/2023/02/12/gong-zuo-bi-ji/aix-xi-tong-ming-ling/">https://miaohsukang.gitee.io/2023/02/12/gong-zuo-bi-ji/aix-xi-tong-ming-ling/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Miaohsukang</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/aix%E5%91%BD%E4%BB%A4/">
                                    <span class="chip bg-color">aix命令</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/02/12/ansible/ansible-ru-men/">
                    <div class="card-image">
                        
                        <img src="https://ts1.cn.mm.bing.net/th/id/R-C.20481cfcdffccefff9e7bd7bb322a0dd?rik=8xIugUv4zxwdGQ&riu=http%3a%2f%2fjust4coding.com%2fimages%2f2017-09-14%2f1.png&ehk=68x7iYnQrijvElEedtUB27olRYyMZCR8v%2feKXk9XtO0%3d&risl=&pid=ImgRaw&r=0" class="responsive-img" alt="ansible入门">
                        
                        <span class="card-title">ansible入门</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-02-12
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Ansible/" class="post-category">
                                    Ansible
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/ansible/">
                        <span class="chip bg-color">ansible</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/02/12/linux/linux-xiang-guan-scsi-ming-ling/">
                    <div class="card-image">
                        
                        <img src="https://img.javatt.com/c2/c2d1366f6c38d9e329f0a0cad7612480.png" class="responsive-img" alt="Linux相关scsi命令">
                        
                        <span class="card-title">Linux相关scsi命令</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-02-12
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Linux/" class="post-category">
                                    Linux
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/linux-scsi/">
                        <span class="chip bg-color">linux-scsi</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2023</span>
            
            <a href="/about" target="_blank">Miaohsukang</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://miaohsukang.gitee.io" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://miaohsukang.gitee.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:12419315+miaohsukang@user.noreply.gitee.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=258603904" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 258603904" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
